#!/bin/sh

# -----------------------------------------------------------------------------
# Description:
# -----------------------------------------------------------------------------
# Starts the Control Center
#
# Copyright 1994 - 2018 AXON IVY AG
# -----------------------------------------------------------------------------

# resolve links - $0 may be a softlink
PRG="$0"

while [ -h "$PRG" ] ; do
  ls=`ls -ld "$PRG"`
  link=`expr "$ls" : '.*-> \(.*\)$'`
  if expr "$link" : '.*/.*' > /dev/null; then
    PRG="$link"
  else
    PRG=`dirname "$PRG"`/"$link"
  fi
done
 
PRGDIR=`dirname "$PRG"`

RUN_CONF="$PRGDIR"/"control.conf"
if [ ! -r "$RUN_CONF" ]; then

  echo "Cannot find $RUN_CONF"
  echo "This file is needed to run the Axon.ivy Engine Control Center"
  exit 1
fi

. "$RUN_CONF"
export JAVA_OPTS

EXECUTABLE=launcher.sh

# Check that target executable exists
if [ ! -x "$PRGDIR"/"$EXECUTABLE" ]; then
  echo "Cannot find $PRGDIR/$EXECUTABLE"
  echo "This file is needed to run the Axon.ivy Control Center"
  exit 1
fi

exec "$PRGDIR"/"$EXECUTABLE" $@ -application ch.ivyteam.ivy.server.control.center.ui
