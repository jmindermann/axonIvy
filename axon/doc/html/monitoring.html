<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"><html lang="en"><head>
      <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
   <meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="description" content=""><meta name="author" content=""><link rel="shortcut icon" href="css/images/ivy_favicon_48.png"><title>Monitoring - Axon.ivy 7.0 | Engine Guide</title><link href="css/bootstrap.min.css" rel="stylesheet"><link media="screen" rel="stylesheet" href="css/docs.min.css"><link href="css/ivy-common-6.css" rel="stylesheet"><link href="css/ivy-userguide.css" rel="stylesheet"></head><body data-spy="scroll" data-target="#sidebar" style="height: 100%"><!-- start-top-navigation --><div class="navbar navbar-top" role="navigation"><div class="container" id="headerdiv"><div class="navbar-header"><a class="ivy-logo" href="http://developer.axonivy.com"><img src="css/images/axon_ivy_logo.png" alt="Axon.ivy"></a><button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button></div><div class="collapse navbar-collapse"><ul class="nav navbar-nav" id="navbar-ivy-links"><li><a href="http://developer.axonivy.com/download/" target="blank">Download <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="http://developer.axonivy.com/doc/" target="blank">Documentation <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="http://answers.axonivy.com" target="blank">Q &amp; A <span class="glyphicon glyphicon-new-window"></span></a></li><li><a href="http://www.ivyteam.ch/flatpress/?paged=1" target="blank">Blog <span class="glyphicon glyphicon-new-window"></span></a></li></ul></div></div></div><!-- end-top-navigation --><div id="content"><div class="container"><div class="navbar"><div class="row"><div class="navbar-header"><button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a class="navbar-brand" href="index.html"><span class="glyphicon glyphicon-book"></span> Axon.ivy 7.0 | <b>Engine Guide</b></a></div></div><div class="row"><div><ul class="nav nav-tabs" role="tablist"><li><a accesskey="h" href="introduction.html">Introduction</a></li><li><a accesskey="h" href="gettingstarted.html">Getting Started</a></li><li><a accesskey="h" href="installation.html">Installation</a></li><li><a accesskey="h" href="configuration.html">Configuration</a></li><li><a accesskey="h" href="integration.html">Integration</a></li><li><a accesskey="h" href="administration.html">Administration</a></li><li class="active"><a accesskey="h" href="monitoring.html">Monitoring</a></li><li><a accesskey="h" href="misc.html">Miscellaneous</a></li><li><a accesskey="h" href="troubleshooting.html">Troubleshooting</a></li></ul></div></div></div></div><div class="jumbotron"><div class="container"><h1>Monitoring</h1></div></div><div class="container"><div class="row row-offcanvas row-offcanvas-right"><div class="col-xs-12 col-sm-9"><div class="row"><div class="col-sm-12 "><div class="chapter">
    
    <div class="sect1"><div class="titlepage"><div><div><h2 id="monitoring-logging" class="title" style="clear: both"><a name="monitoring.logging"></a>Logging</h2></div></div></div>
        
        <p>Axon.ivy uses a library called <a class="ulink" href="http://logging.apache.org/log4j/1.2/index.html" target="_top">Log4j</a> from <a class="ulink" href="http://www.apache.org" target="_top">Apache
                Foundation</a> to log certain events. The logging configuration file is located
            in the <em class="filename">{Axon.ivy Install Directory}/configuration</em> directory and is
            called <em class="filename">log4jconfig.xml</em>. By
            default log events are written to the console and to log files. The log files are
            written to the <em class="filename">{Axon.ivy Install
                Directory}/logs</em> directory. </p>
        <p>
            </p><div class="table"><a name="d5e5126"></a><div class="table-contents">
                
                <table class="table table-bordered table-hover" summary="Default settings for logging"><colgroup><col class="c1"><col class="c2"></colgroup><thead><tr><th>Logging type</th><th>Log level</th></tr></thead><tbody><tr><td>Console log</td><td>WARN</td></tr><tr><td>File log</td><td>INFO</td></tr><tr><td>Windows Event Log</td><td>FATAL</td></tr></tbody></table>
            </div><p class="title">Table&nbsp;7.1.&nbsp;Default settings for logging</p></div><p><br class="table-break">
        </p>
        <p>The log levels are used as follows:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term"><code class="code">FATAL</code></span></dt><dd>
                        <p>This level is used to report problems that may cause the engine not to
                            work correctly.</p>
                    </dd><dt><span class="term"><code class="code">ERROR</code></span></dt><dd>
                        <p>This level is used to report problems that something has not worked as
                            expected and may cause that the user gets an error message on the
                            UI.</p>
                    </dd><dt><span class="term"><code class="code">WARN</code></span></dt><dd>
                        <p>This level is used to report problems that have to be solved because
                            it can lead to errors later.</p>
                    </dd><dt><span class="term"><code class="code">INFO</code></span></dt><dd>
                        <p>This level is used to report that something was done. (E.g. for
                            example a database call)</p>
                    </dd><dt><span class="term"><code class="code">DEBUG</code></span></dt><dd>
                        <p>This level is used to report internal events. Most of these events are
                            only interessting for developers. However, some of them may also be
                            interessting for troubleshooting.</p>
                    </dd></dl></div>
        <p>Feel free to change the logging configuration to your needs. </p>
        <div class="sect2"><div class="titlepage"><div><div><h3 id="d5e5173" class="title"><a name="d5e5173"></a>Log Message Format</h3></div></div></div>
            
            <p>A log message looks like the following:</p>
                <pre class="programlisting">10:19:14.173 INFO [ch.ivyteam.ivy.richdialog.exec.internal.panel.RichDialogPanelImpl] [http-8082-4] [application=0, client=127.0.0.1, task=4, pmv=System$Administration$1, session=4, request=Ulc over HTTP POST 115D746C75FAF428/start1.ivp, executionContext=SYSTEM] 
  Can not restore UI state. No user is logged in.</pre>
            
            <p>The first entry of a log message is the exact time it was written
                    (<code class="code">10:19:14.173</code>). Followed by the log level of the message
                    (<code class="code">INFO</code>).  Next is the log category
                    (<code class="code">[ch.ivyteam.ivy.richdialog.exec.internal.panel.RichDialogPanelImpl]</code>).
                Then the name of the thread in whichs context the log message was written follows
                    (<code class="code">[http-8082-4]</code>). The next section conains a lot of Axon.ivy
                context information. For example the user session or the process model version that
                were active when the log message was written. The content of the context information
                can change depending on the context the log message was written. The following
                context information exists:</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">application</span></dt><dd>
                            <p>The identifier of the current application.</p>
                        </dd><dt><span class="term">client</span></dt><dd>
                            <p>The IP address and maybe the host name of the current web client.
                            </p>
                        </dd><dt><span class="term">executionContext</span></dt><dd>
                            <p>The security execution context that is used to check permissions.
                                This can be the current session or SYSTEM if security is
                                disabled.</p>
                        </dd><dt><span class="term">request</span></dt><dd>
                            <p>Information about the current request is written to the
                                log.</p>
                        </dd><dt><span class="term">requestId</span></dt><dd>
                            <p>The identifier of the current request. Can be used to filter all
                                messages that are written in the context of the same request.</p>
                        </dd><dt><span class="term">pmv</span></dt><dd>
                            <p>The identification string of the current process model
                                version.</p>
                        </dd><dt><span class="term">processElement</span></dt><dd>
                            <p>The process element that is currently executed.</p>
                        </dd><dt><span class="term">rd</span></dt><dd>
                            <p>The fully qualified name of the current Rich Dialog.</p>
                        </dd><dt><span class="term">session</span></dt><dd>
                            <p>The current Axon.ivy session. The identifier of the session and
                                the user name (if a user is logged in).</p>
                        </dd><dt><span class="term">task</span></dt><dd>
                            <p>The identifier of the current task.</p>
                        </dd></dl></div><p>On the next line the message that was logged follows. In case of
                errors a java exception stack trace may follow on the next lines. </p>
        </div>
        <div class="sect2"><div class="titlepage"><div><div><h3 id="d5e5223" class="title"><a name="d5e5223"></a>Runtime Log</h3></div></div></div>
            
            <p>On the Axon.ivy Designer certain events of processes are logged to the runtime
                log view. The process designer itself can write to the runtime log using the ivy.log
                object. On the Axon.ivy Engine all information written to the runtime log is
                handled by Log4j. It is written to the console, to log files and to the Windows
                Event Log. </p>
            <p>The runtime log entries are written to special log categories which names start
                with <span class="command"><strong>runtimelog</strong></span> followed by the application name, the process
                model name, and the runtime log category. For example: the category name
                    <span class="command"><strong>runtimelog.app.hrm.user_code</strong></span> represents the runtime log of
                the application called <span class="command"><strong>app</strong></span>, with the process model called
                    <span class="command"><strong>hrm</strong></span> and the runtime log category
                <span class="command"><strong>user_code</strong></span>.</p>
            <div class="sect3"><div class="titlepage"><div><div><h4 id="d5e5232" class="title"><a name="d5e5232"></a>Example</h4></div></div></div>
                
                <p>The following xml snip can be added to the Log4j configuration file so that
                    the runtime log of the process model <span class="command"><strong>hrm</strong></span> of the application
                        <span class="command"><strong>app</strong></span> is written to its own log file called
                        <em class="filename">runtimelog.app.hrm.log</em>:</p>
                <p>
                    </p><pre class="screen">&lt;!-- Defines a log file called runtimelog.app.hrm.log --&gt;
&lt;appender name="RuntimeLog" class="org.apache.log4j.DailyRollingFileAppender"&gt; 
 	&lt;param name="File" value="${user.dir}/logs/runtimelog.app.hrm.log"/&gt; 
 	&lt;param name="DatePattern" value="'.'yyyy-MM-dd"/&gt; 
 	&lt;layout class="org.apache.log4j.IvyLog4jLayout"&gt; 
		&lt;param name="DateFormat" value="HH:mm:ss"/&gt;
 	&lt;/layout&gt; 
&lt;/appender&gt;

&lt;!-- Configures that the log category runtimelog.app.hrm has priority DEBUG and is written to the RuntimeLog file --&gt;
&lt;category name="runtimelog.app.hrm" class="ch.ivyteam.log.Logger"&gt;
  &lt;appender-ref ref="RuntimeLog"/&gt; 
  &lt;priority value="DEBUG"/&gt;
&lt;/category&gt;</pre><p>
                </p>
            </div>
        </div>
        <div class="sect2"><div class="titlepage"><div><div><h3 id="monitoring-logging-performance" class="title"><a name="monitoring.logging.performance"></a>Request/Performance Logging</h3></div></div></div>
            
            <p>If you want to know the time when a request was received from the Axon.ivy Engine
                and at what time the request processing of the engine was done, then you use the
                following log category:</p>
            <p><code class="code">ch.ivyteam.ivy.webserver.internal.PerformanceLogValve</code></p>
            <p>Configuration Example (configuration/log4jconfig.xml):</p>
            <pre class="screen">&lt;!-- Configures that the log category ch.ivyteam.ivy.webserver.internal.PerformanceLogValve has priority DEBUG  --&gt;
&lt;category name="ch.ivyteam.ivy.webserver.internal.PerformanceLogValve" class="ch.ivyteam.log.Logger"&gt;
  &lt;priority value="DEBUG"/&gt;
&lt;/category&gt;</pre>
            <p>The log category logs the entry of a request right after the internal web server
                has received it. The exit is logged after the request was processed by the web
                server. In the exit log message you find the duration of the request in
                microseconds. </p>
            <p>The log level of the these messages is <code class="code">DEBUG</code>. Change the threshold of
                the appenders to DEBUG so that log messages with this priority are written to the
                appender's destination. </p>
            <p>Configuration Example
                (configuration/log4jconfig.xml):</p><pre class="screen">&lt;appender name="FileLog" class="org.apache.log4j.DailyRollingFileAppender"&gt;
  &lt;param name="Threshold" value="<span class="bold"><strong>DEBUG</strong></span>"/&gt;
  &lt;param name="File" value="${user.dir}/logs/ch.ivyteam.ivy.log"/&gt;
  &lt;param name="DatePattern" value="'.'yyyy-MM-dd"/&gt;
  &lt;layout class="org.apache.log4j.IvyLog4jLayout"&gt;
    &lt;param name="DateFormat" value="HH:mm:ss.SSS"/&gt;
  &lt;/layout&gt;
&lt;/appender&gt;</pre>
            <p>If you want to know what the Axon.ivy Engine has done between the entry and exit
                of the request you can use the context information <code class="code">requestId</code> which you
                can find on every log message. A unique request identifier is assigned to every
                request. By filtering the log for messages with the same <code class="code">requestId</code> you
                find out what kind of operations Axon.ivy Engine has done during the request.</p>
            <p>Example:</p>
            <pre class="screen">10:49:40.904 DEBUG [...rformanceLogValve] [http-8081-1] [<span class="bold"><strong>requestId=43</strong></span>] &nbsp;
  <span class="bold"><strong>Entry</strong></span> url=http://localhost:8081/ivy/pro/designer/OpenEditor/13224891E742EE17/start4.ivp client=0:0:0:0:0:0:0:1 session=null httpsession=C900A5BC35251533DEB5B36E4316EE98
10:49:41.020 INFO [...nEditor.user_code] [http-8081-1] [application=2147483647, client=0:0:0:0:0:0:0:1, <span class="bold"><strong>requestId=43</strong></span>, task=1, pmv=designer$OpenEditor$1, processElement=13224891E742EE17-f26-t, session=1, request=HTTP GET test.mod/start4.ivp(1.1.0.0), executionContext=1] &nbsp;
  This is my log message
10:49:41.050 INFO [...ner.OpenEditor.db] [Process Extension Thread 1] [application=2147483647, client=0:0:0:0:0:0:0:1, <span class="bold"><strong>requestId=43</strong></span>, task=1, pmv=designer$OpenEditor$1, processElement=13224891E742EE17-f29-bean, session=1, request=HTTP GET test.mod/start4.ivp(1.1.0.0), executionContext=SYSTEM]
  Execute database statement SELECT * FROM IWA_ACCESSCONTROL 
10:49:41.050 INFO [...ner.OpenEditor.db] [Process Extension Thread 1] [application=2147483647, client=0:0:0:0:0:0:0:1, <span class="bold"><strong>requestId=43</strong></span>, task=1, pmv=designer$OpenEditor$1, processElement=13224891E742EE17-f29-bean, session=1, request=HTTP GET test.mod/start4.ivp(1.1.0.0), executionContext=SYSTEM]
 &nbsp;Executed database statement successfully in 0 milli seconds 
10:49:41.100 DEBUG [...rformanceLogValve] [http-8081-1] [<span class="bold"><strong>requestId=43</strong></span>]
 &nbsp;<span class="bold"><strong>Exit</strong></span> url=http://localhost:8081/ivy/pro/designer/OpenEditor/13224891E742EE17/start4.ivp client=0:0:0:0:0:0:0:1 session=1 httpsession=C900A5BC35251533DEB5B36E4316EE98 <span class="bold"><strong>duration=19418</strong></span>1 us</pre>
            <p>In the example above you see the log messages when the request with the id 43 has
                entered and exited the web server. There was also one user runtime log message
                written in the same request and one database call that has lasted 0 milliseconds.
                The whole request needed 19.418 ms to be processed.</p>
        </div>
        <div class="sect2"><div class="titlepage"><div><div><h3 id="monitoring-logging-ulc" class="title"><a name="monitoring.logging.ulc"></a>Configure ULC logging on server and client</h3></div></div></div>
            
            <p>It is possible to log ULC communication and status messages both on client and
                server side. Both a default log level and a log level per known Ivy user can be
                configured, as well as a log file path/name where the log of an ULC session should
                be stored permanently.</p>
            <p>To configure ULC logging, the files
                    <em class="filename">configuration/jnlpconfig.any</em> and
                    <em class="filename">configuration/ulclogconfig.any</em> within the Axon.ivy Engine
                installation folder must be edited. The former one controls the client-side logging,
                the latter one the server-side logging. The log configurations are similar in both
                cases and edited with <span class="emphasis"><em>Anything</em></span> notation.</p>
            <p>To modify the <span class="italic">client logging</span> properties locate
                the following section in
                <em class="filename">jnlpconfig.any</em>:</p><pre class="screen">...
                    
/log-level  {
    /user-specific {
        /johndoe  FINER
    }    
    /default  WARNING
    /log-to-file   "C:/temp/xpertivy_ulc_client.log"
}    
...</pre>
            <p>To modify the <span class="italic">server logging</span> properties locate
                the following section in
                <em class="filename">ulclogconfig.any</em>:</p><pre class="screen">{
    /user-specific {
        /johndoe  FINER
    }
    /default  WARNING
    /log-to-file  "xpertivy_ulc_server.log"
} </pre>
            <p>To enable user-specific logging on server side and/or client side, enter the known
                name of the Ivy user (or AD user) to log for in the <code class="code">/user-specific</code>
                section, followed by a valid log level (one of <code class="code">SEVERE</code>,
                    <code class="code">WARNING</code>, <code class="code">INFO</code>, <code class="code">FINE</code>, <code class="code">FINER</code>,
                    <code class="code">FINEST</code>) just as specified in the example configurations with the
                user <span class="emphasis"><em>johndoe</em></span>. Use double quotes around the Ivy user name if it
                contains special (i.e. non-ASCII) characters or white space.</p>
            <p>To set the default log level (which will be used for all sessions) set the log
                level for the key <code class="code">/default</code>.</p>
            <p>Finally, to enable logging to a file, enter a filename<span class="bold"><strong> in
                    double quotes</strong></span> for the key <code class="code">/log-to-file</code> as shown above.
                If the <code class="code">/log-to-file</code> slot is omitted altogether or if it's value is a
                    <span class="emphasis"><em>*</em></span>, then no logfile will be created.</p>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
                <p>Changes in log configurations take place immediately for all new sessions or
                    client application starts; a restart of the engine is not necessary. However,
                    you have to restart any running client applications for the new log settings to
                    take effect.</p>
                <p>The created log files will automatically include the user name (if
                    user-specific logging is enabled), the HTTP session ID and an ID for the
                    application. The two ID's mentioned are part of the client and the engine log
                    file, so it is easy to find the two logs related to a client-server
                    communication.</p>
            </div>
            <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3>
                <p>For reasonable results a default level of <code class="code">WARNING</code> or
                        <code class="code">INFO</code> is recommended. For error analysis, <code class="code">FINER</code> on
                    the client and <code class="code">FINER</code> on the server is recommended, on a per-user
                    basis. </p>
                <p>If you enable ULC logging, it is recommended to specify the
                        <code class="code">/log-to-file</code> parameter. This way the log output is redirected
                    to a file, otherwise the logs are written to the console.</p>
            </div>
            <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3>
                <p>Please bear in mind that the logfile path that you specify may not be in
                    correct format for every client platform (Linux/Windows). If this should be the
                    case then the logfiles will be created in the client system's default temporary
                    directory.</p>
                <p>Be aware that log files can become very large (up to several hundred MB per
                    day and user if <code class="code">FINE</code> /<code class="code">FINER/FINEST</code> is used as log
                    level). </p>
            </div>
        </div>
    </div>
    <div class="sect1"><div class="titlepage"><div><div><h2 id="monitoring-performancestatistic" class="title" style="clear: both"><a name="monitoring.performancestatistic"></a>Process Element Performance Statistic and Analysis</h2></div></div></div>
        
        <div class="sect2"><div class="titlepage"><div><div><h3 id="monitoring-performancestatistic-configure" class="title"><a name="monitoring.performancestatistic.configure"></a>Configure Process Element Performance Statistic on Axon.ivy Engine</h3></div></div></div>
            
            <p>On an Axon.ivy Engine it is possible to dump out performance statistic
                informations, periodically into a CSV formatted file. This allows to analyse the
                performance of the engine and to detect long running and performance intensive
                process elements and processes. The file contains detailed informations of each
                executed process element since the last dump.</p>
            <p>After activation the informations are collected and written to the
                    <code class="code">log</code>-directory of the Axon.ivy Engine installation. The file
                contains the following name: performance_statistic_jjjj-mm-tt_hh-mm-tt.csv (e.g.
                performance_statistic_2011-03-15_09-21-05.csv)</p>
            <p>All configurations are administered by the following <a class="link" href="administration.html#administration.systemproperties" title="System Properties">System
                Properties</a>:</p>
            <div class="table"><a name="d5e5323"></a><div class="table-contents">
                
                <table class="table table-bordered table-hover" summary="System properties to configure the firing statistic"><colgroup><col class="c1"><col class="c2"></colgroup><thead><tr><th>Property</th><th>Description</th></tr></thead><tbody><tr><td>ProcessEngine.FiringStatistic.Active</td><td>
                                <p><code class="code">True</code> for activation, otherwise
                                    <code class="code">false</code>. An activation may slow down the engine
                                    performance!</p>
                                <p>A restart is not required after de-/activation. The setting
                                    take effect, maximum after the duration of the defined interval
                                    (System Property:
                                        <code class="code">ProcessEngine.FiringStatistic.Interval</code>).</p>
                            </td></tr><tr><td>ProcessEngine.FiringStatistic.Interval</td><td>
                                <p>Interval in seconds the statistic is written to the log
                                    directory. Default value is 300 seconds (5 minute). After each
                                    interval the statistic informations are cleaned after the dump
                                    out.</p>
                                <p>A restart is required after a value change.</p>
                            </td></tr></tbody></table>
            </div><p class="title">Table&nbsp;7.2.&nbsp;System properties to configure the firing statistic</p></div><br class="table-break">
        </div>
        <div class="sect2"><div class="titlepage"><div><div><h3 id="monitoring-performancestatistic-analyse" class="title"><a name="monitoring.performancestatistic.analyse"></a>Analyse the Performance Statistic</h3></div></div></div>
            
            <p>All time values are in milliseconds. The execution of some process elements are
                separated in two categories internal and external.
                
                </p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Internal Category</span></dt><dd>
                            <p>The internal category is used for the execution time in the
                                process engine itself without the external exection.</p>
                        </dd><dt><span class="term">External Category</span></dt><dd>
                            <p>The external category is used for execution time in external
                                systems. In the table below the process elements are listed which
                                use the external category.</p>
                            <div class="table"><a name="d5e5358"></a><div class="table-contents">
                                
                                <table class="table table-bordered table-hover" summary="Process elements with usage of external category"><colgroup><col class="c1"><col class="c2"><col></colgroup><thead><tr><th>Process Element</th><th>Internal Category</th><th>External Category</th></tr></thead><tbody><tr><td><span class="command"><strong>Database Step</strong></span></td><td>Parameter-mapping, caching, output-mapping and
                                                ivyScript execution.</td><td>The execution of the SQL statement on the database
                                                server.</td></tr><tr><td><span class="command"><strong>Web Service Call Step</strong></span></td><td>Parameter-mapping, caching, output-mapping and
                                                ivyScript execution.</td><td>The execution of the Web Service on the web
                                                server.</td></tr><tr><td><span class="command"><strong>E-Mail Step</strong></span></td><td>Parameter-mapping</td><td>The interaction with the Mail-Server.</td></tr><tr><td><span class="command"><strong>Program Interface</strong></span></td><td>&nbsp;</td><td>The
                                                execution of the defined Java-Class.</td></tr></tbody></table>
                            </div><p class="title">Table&nbsp;7.3.&nbsp;Process elements with usage of external category</p></div><br class="table-break">
                        </dd></dl></div>
            <p>For each executed process element one entry in the view is created. See the table
                below which information is available.</p>
            <div class="table"><a name="d5e5391"></a><div class="table-contents">
                
                <table class="table table-bordered table-hover" summary="Column Description"><colgroup><col class="c1"><col class="c2"></colgroup><thead><tr><th>Name</th><th>Description</th></tr></thead><tbody><tr><td>
                                <span class="command"><strong>Entry ID</strong></span>
                            </td><td>Entry ID, useful to order the entries by its first
                                exection.</td></tr><tr><td>
                                <span class="command"><strong>Application</strong></span>
                            </td><td>Application of the process element.</td></tr><tr><td>
                                <span class="command"><strong>Process Model</strong></span>
                            </td><td>Process Model of the process element.</td></tr><tr><td>
                                <span class="command"><strong>PM Version</strong></span>
                            </td><td>Process Model Version of the process element.</td></tr><tr><td>
                                <span class="command"><strong>Process Path</strong></span>
                            </td><td>The path to the process.</td></tr><tr><td>
                                <span class="command"><strong>Element ID</strong></span>
                            </td><td>The identifier of the process element.</td></tr><tr><td>
                                <span class="command"><strong>Element Name</strong></span>
                            </td><td>The first line of the process element name (display
                                name).</td></tr><tr><td>
                                <span class="command"><strong>Element Type</strong></span>
                            </td><td>The type of the process element.</td></tr><tr><td>
                                <span class="command"><strong>Total Time</strong></span>
                            </td><td>Total time [ms] of internal and external execution.</td></tr><tr><td>
                                <span class="command"><strong>Int. Executions</strong></span>
                            </td><td>Total internal executions of the process element.</td></tr><tr><td>
                                <span class="command"><strong>Total Int. Time</strong></span>
                            </td><td>Total internal time [ms] of process engine executions.</td></tr><tr><td>
                                <span class="command"><strong>Min. Int. Time</strong></span>
                            </td><td>Minimum internal process engine execution time [ms].</td></tr><tr><td>
                                <span class="command"><strong>Avg. Int. Time</strong></span>
                            </td><td>Avarage internal process engine execution time [ms].</td></tr><tr><td>
                                <span class="command"><strong>Max. Int. Time</strong></span>
                            </td><td>Maximum internal process engine execution time [ms].</td></tr><tr><td>
                                <span class="command"><strong>Ext. Executions</strong></span>
                            </td><td>Total external execution count.</td></tr><tr><td>
                                <span class="command"><strong>Total Ext. Time</strong></span>
                            </td><td>Total external execution time [ms].</td></tr><tr><td><span class="command"><strong>Min. Ext. Time</strong></span>
                            </td><td>Minimum external execution time [ms].</td></tr><tr><td>
                                <span class="command"><strong>Avg. Ext. Time</strong></span>
                            </td><td>Average external execution time [ms].</td></tr><tr><td>
                                <span class="command"><strong>Max. Ext. Time</strong></span>
                            </td><td>Maximum external execution time [ms].</td></tr></tbody></table>
            </div><p class="title">Table&nbsp;7.4.&nbsp;Column Description</p></div><br class="table-break">
            <div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Tip</h3>
                <p>To find a process element by its <span class="emphasis"><em>Element ID</em></span>, use the
                    search dialog <span class="emphasis"><em>Find process or element</em></span> in the Axon.ivy
                    Designer. Use menu <span class="emphasis"><em>Axon.ivy &gt; Debug &gt; Find process or
                        element</em></span>.</p>
            </div>
        </div>
    </div>
    <div class="sect1"><div class="titlepage"><div><div><h2 id="monitoring-jmx" class="title" style="clear: both"><a name="monitoring.jmx"></a>Java Management Extensions (JMX)</h2></div></div></div>
        
        <p>Java Management Extensions (JMX) is a technology to read and write runtime information
            from a java processes. This allows monitoring tools to monitor the state the Axon.ivy
            Engine, e.g. with <a class="link" href="monitoring.html#monitoring.visualvm" title="VisualVM">VisualVM</a>, Java Mission Control or
            Nagios. A monitoring tool that runs on the same machine and with the same user as the
            Axon.ivy Engine can connect to Axon.ivy Engine without any additional
            configuration.</p>
        <div class="sect2"><div class="titlepage"><div><div><h3 id="d5e5486" class="title"><a name="d5e5486"></a>Activate Remote Access</h3></div></div></div>
            
            <p>If the Axon.ivy Engine is running under another user or on a remote host than the
                monitoring tool, then JMX remote access has to be activated. Remote access is
                protected by a user name and password of an Axon.ivy Engine Administrator, so all
                Axon.ivy Engine Administrator have access.</p>
            <p>On Windows uncommenting the following line in an ivy launch control file
                    <em class="filename">*.ilc</em> (See chapter <a class="link" href="misc.html#misc.toolreference.ilc" title="Windows Program Launcher Configuration">Windows Program Launcher
                    Configuration</a>) to activate remote
                access:</p><pre class="programlisting">ivy.management.port=9003</pre><p>On other operating
                systems the below options must be added to the launch configuration script of the engine (<em class="filename">AxonIvyEngine.conf</em>):</p><pre class="screen">-Dcom.sun.management.jmxremote.port=9003 
-Dcom.sun.management.jmxremote.login.config=jmx
-Djava.security.auth.login.config=configuration/jaas.config
-Dcom.sun.management.jmxremote.ssl=false
-Djava.rmi.server.hostname=&lt;IP of the machine&gt;</pre>
        </div>
        <div class="sect2"><div class="titlepage"><div><div><h3 id="d5e5495" class="title"><a name="d5e5495"></a>Auto Discovery (JDP)</h3></div></div></div>
            
            <p>Some monitoring tools can auto discover running JMX servers in the network. If so
                the user does not have to know the server host and JMX IP port. Instead he can
                simple click on the auto discovered server.</p>
            <p>Axon.ivy Engine supports auto discovery by default if JMX is activated on Windows.
                However, you can disable this feature by uncommenting the following line in the
                    <em class="filename">*.ilc</em>
                file::</p><pre class="programlisting">ivy.management.autodiscovery=false</pre><p>On other
                operating systems the following option must be set to the launch configuration
                script of the engine (<em class="filename">AxonIvyEngine.conf</em>) to activate
                it:</p><pre class="programlisting">-Dcom.sun.management.jmxremote.autodiscovery=true</pre>
        </div>
        <div class="sect2"><div class="titlepage"><div><div><h3 id="d5e5503" class="title"><a name="d5e5503"></a>Provided MBeans</h3></div></div></div>
            
            <p>The Axon.ivy Engine provides performance and management information by a set of
                MBeans. These allow to monitor the Axon.ivy Engine. Most monitoring tools provide a
                user interface to browse the available MBeans. MBeans are mostly shown in a tree
                which is built with the information provided in the names of MBeans. </p><div class="figure"><a name="d5e5506"></a><div class="figure-contents">
                    
                    <div class="mediaobject"><img src="images/Monitoring/mbeans.png" alt="MBeans Tree of Axon.ivy shown in MBeans Plugin of VisualVM"></div>
                </div><p class="title">Figure&nbsp;7.1.&nbsp;MBeans Tree of Axon.ivy shown in MBeans Plugin of VisualVM </p></div><p><br class="figure-break"></p>
            <p>The names of MBeans provided by Axon.ivy are structured so that the name contains
                the Application, Process Model, Process Model Version or Environment where this is
                reasonable. </p>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
                <p>Examples of typical Axon.ivy MBean names: </p>
                <p>
                    </p><div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
                            <p>Axon.ivy Engine:type=External Web
                                Service,application=MyApplication,environment=Default,name=Echo
                                (43838347ABCD)</p>
                        </li><li class="listitem">
                            <p>Axon.ivy Engine:type=Job Manager</p>
                        </li><li class="listitem">
                            <p>Axon.ivy Engine:type=Process Start Event
                                Bean,application=MyApplication,pm=MyProcessModel,pmv=1,name="MyStartEventBean
                                (3485471349/start.ivp)"</p>
                        </li></ul></div><p>
                </p>
            </div>
            <p>The name and description of a MBean can be found in its meta information (see the
                    <span class="emphasis"><em>Metadata</em></span> tab in the MBeans tab of VisualVM). MBeans
                provide information through attributes and operations. The description of the
                attributes and operations can also be found in its meta information (see too the
                tool tips in the <span class="emphasis"><em>Attributes and Operations</em></span> tab of the MBeans
                tab of VisualVM).</p>
            <div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Warning</h3>
                <p>Manipulating attribute values or calling operations on MBeans will immediately
                    change the configuration of your system and can therefore harm your running
                    applications. </p>
                <p>If not mentioned otherwise, a manipulation only affects the currently running
                    engine. The manipulation will not survive a engine restart. </p>
                <p>Manipulations that survive a engine restart contain the following text in the
                    description of the attribute or operation: <code class="code">(Persistent)</code>.</p>
            </div>
            <p>In addition to the MBeans provided by Axon.ivy some third party libraries
                included in Axon.ivy provide their own MBeans. One of them is Apache Tomcat that is
                used as internal web server. Its MBeans provide information about the handling of
                HTTP requests like request count, errors, execution time, sessions, etc. Moreover,
                the Java virtual machine also provides some MBeans that provide information about
                the used memory (Java heap), CPU usage, uptime, etc.</p>
            <p>Below a not complete list of provided information:</p>
            <div class="itemizedlist"><ul class="itemizedlist" style="list-style-type: disc; "><li class="listitem">
                    <p>External Database (connections, transactions, errors, execution time,
                        etc.)</p>
                    <p>ivy Engine:type=External
                        Database,application=*,environment=*,name=*</p>
                </li><li class="listitem">
                    <p>Web Service (calls, errors, execution time, etc.)</p>
                    <p>ivy Engine:type=External Web
                        Service,application=*,environment=*,name=*</p>
                </li><li class="listitem">
                    <p>REST Web Service (calls, errors, execution time, slow calls, etc.)</p>
                    <p>ivy Engine:type=External REST Web
                        Service,application=*,environment=*,name=*</p>
                </li><li class="listitem">
                    <p>System Database (connections, transactions, errors, execution time,
                        etc.)</p>
                    <p>ivy Engine:type=Database Persistency Service</p>
                </li><li class="listitem">
                    <p>HTTP Requests (count, errors, execution time, etc.)</p>
                    <p>*:type=GlobalRequestProcessor,name=*</p>
                </li><li class="listitem">
                    <p>Number of Sessions (HTTP sessions, Axon.ivy sessions, licence relevant
                        sessions, Rich Dialog client sessions, etc.)</p>
                    <p>ivy Engine:type=Security Manager</p>
                    <p>ivy Engine:type=Rich Dialog Execution Manager</p>
                    <p>*:type=Manager,context=*,host=*</p>
                </li><li class="listitem">
                    <p>Background jobs (name, next execution time, etc.)</p>
                    <p>ivy Engine:type=Job Manager</p>
                    <p>ivy Engine:type=Daily Job,name=*</p>
                    <p>ivy Engine:type=Periodical Job,name=*</p>
                </li><li class="listitem">
                    <p>Process Start Event Beans (polls, executions, errors, execution time,
                        etc.)</p>
                    <p>ivy Engine:type=Process Start Event
                        Bean,,application=*,pm=*,pmv=*,name=*</p>
                </li><li class="listitem">
                    <p>Process Intermediate Event Beans (polls, firings, errors, execution time,
                        etc.)</p>
                    <p>ivy Engine:type=Process Intermediate Event
                        Bean,application=*,pm=*,pmv=*,name=*</p>
                </li><li class="listitem">
                    <p>Application, Process Model and Process Model Version, Library information
                        (activity state, release state, name, description, etc.)</p>
                    <p>ivy Engine:type=Application,name=*</p>
                    <p>ivy Engine:type=Process Model,application=*,name=*</p>
                    <p>ivy Engine:type=Process Model Version,application=*,pm=*,name=*</p>
                </li><li class="listitem">
                    <p>Cluster, Cluster Nodes and Cluster Communication information (received and
                        sent message, errors, execution time, etc.)</p>
                    <p>ivy Engine:type=Cluster Manager</p>
                    <p>ivy Engine:type=Cluster Channel</p>
                </li><li class="listitem">
                    <p>Thread Pool information (core, maximum and current pool size, active
                        threads, queue size)</p>
                    <p>ivy Engine:type=Thread Pool, name=Background Operation Executor</p>
                    <p>ivy Engine:type=Thread Pool, name=Immediate Job Executor</p>
                    <p>ivy Engine:type=Thread Pool, name=Scheduled Job Executor</p>
                </li><li class="listitem">
                    <p>System Database and CMS Cache </p>
                    <p>ivy Engine type=CacheClassPersistencyService,name=* [clearCache()]</p>
                    <p>ivy Engine type=CacheClassPersistencyService,name=*,strategy=CacheAll
                        [maxBytesToCache, maxCharactersToCache]</p>
                    <p>ivy Engine
                        type=CacheClassPersistencyService,name=*,strategy=CacheAllRemoveUnused
                        [maxBytesToCache, maxCharactersToCache, countLimit, usageLimit]</p>
                    <p>ivy Engine type=CacheClassPersistencyService,name=*,cache=LongBinaries
                        [readHits, readMisses, writes, cachedLongValues, clearCache()]</p>
                    <p>ivy Engine type=CacheClassPersistencyService,name=*,cache=LongCharacters
                        [readHits, readMisses, writes, cachedLongValues, clearCache()]</p>
                    <p>ivy Engine
                        type=CacheClassPersistencyService,name=*,cache=ObjectsAndAssociations
                        [objectReadHits, objectReadMisses, objectWrites, cachedObjects,
                        associationReadHits, associationReadMisses, associationWrites,
                        cachedAssociations, clearCache()]</p>
                </li><li class="listitem">
                    <p>Memory (Java Heap, Perm Gen)</p>
                    <p>java.lang:type=Memory</p>
                </li><li class="listitem">
                    <p>CPU Usage, Uptime</p>
                    <p>java.lang:type=Runtime</p>
                    <p>java.lang.type=OperatingSystem</p>
                </li></ul></div>
        </div>
    </div>
    <div class="sect1"><div class="titlepage"><div><div><h2 id="monitoring-visualvm" class="title" style="clear: both"><a name="monitoring.visualvm"></a>VisualVM</h2></div></div></div>
        
        <p>We recommend to use <a class="ulink" href="https://visualvm.github.io/" target="_top">VisualVM</a> to monitor Axon.ivy Engine
            processes. VisualVM allows you to monitor the memory and CPU usage of the Axon.ivy
            Engine process. It can be used to analyze problems in your Axon.ivy projects like memory
            leaks or thread dead locks.</p>
        <p><span class="inlinemediaobject"><img src="images/Monitoring/visualvm.png"></span></p>
        <p>VisualVM can connect to all Java processes running on the same host and with the same
            user. In addition you can use JMX (See section <a class="link" href="monitoring.html" title="Chapter&nbsp;7.&nbsp;Monitoring">Java
                Management Extension</a> for more information) to connect VisualVM to processes
            that run with another user (e.g. as Windows Service) or on remote machines.</p>
        <p>VisualVM is available from <a class="ulink" href="https://visualvm.github.io/" target="_top">https://visualvm.github.io/</a> or as
                <code class="code">jvisualvm</code> in the <em class="filename">bin</em> directory of a JDK (Java
            Developer Kit).</p>
    <div class="sect2"><div class="titlepage"><div><div><h3 id="d5e5607" class="title"><a name="d5e5607"></a>Axon.ivy Plugin for VisualVM</h3></div></div></div>
        
        <p>In the delivery of Axon.ivy we provide a dedicated plugin for VisualVM that allows
                you to monitor some of the technical aspects of an Axon.ivy Engine or Designer. For
                example you can observe the current transactions on the System Database, whether you
                violate the licence or how many requests are running at an Axon.ivy Engine at any
                given time. And in the same tool you can still observe the heap or CPU usage or
                create thread dumps.</p>
            <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Note</h3>
            <p>VisualVM is a tool to observe the current state of the monitored engine. It is not
                    intended for long-time observation, recording or even alarming. If you want to
                    do that, make use of the <a class="link" href="monitoring.html#monitoring.jmx" title="Java Management Extensions (JMX)">JMX
                        extensions of Axon.ivy.</a> in combination with tools like <a class="ulink" href="http://www.nagios.org" target="_top">Nagios</a> or <a class="ulink" href="http://www.ibm.com/software/tivoli/" target="_top">IBM Tivoli</a>. </p>
            </div>
                <p>The plugin itself should be mostly self explanatory. It consists of multiple tabs
                    for the different aspects. Most of the tabs contain a number of charts that always
                    have a similar structure:</p><div class="mediaobject"><img src="images/Monitoring/visualvm_plugin.png"></div>
       
            <div class="sect3"><div class="titlepage"><div><div><h4 id="d5e5619" class="title"><a name="d5e5619"></a>Installation</h4></div></div></div>
                
                
                <div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem">
                        <p>Make sure that you have an installation of VisualVM. If you use a
                            standalone version of VisualVM, please make sure that you use at least
                            version 1.3.7.</p>
                    </li><li class="listitem">
                        <p>Run VisualVM (in JDK go to the <span class="emphasis"><em>bin</em></span> folder and
                            start <span class="command"><strong>jvisualvm</strong></span>)</p>
                    </li><li class="listitem">
                        <p>Go to the <span class="command"><strong>Tools/Plugins</strong></span> menu</p>
                    </li><li class="listitem">
                        <p>Change to <span class="emphasis"><em>Downloaded</em></span> tab and click on the
                                <span class="emphasis"><em>Add Plugins...</em></span> button</p>
                    </li><li class="listitem">
                        <p>In the file chooser that appears, navigate to the subfolder
                                <em class="filename">misc/visualvm</em> in your engine installation
                            directory and choose the
                            <em class="filename">visualvm-plugin.nbm</em>.</p>
                    </li><li class="listitem">
                        <p>Follow the instructions in the installation wizard.</p>
                    </li><li class="listitem">
                        <p>Choose the option to restart VisualVM at the end of the installation
                            wizard.</p>
                    </li></ol></div>
            
            </div>

        </div>
    </div>
    <div class="sect1"><div class="titlepage"><div><div><h2 id="monitoring-serveradministration" class="title" style="clear: both"><a name="monitoring.serveradministration"></a>Engine Administration </h2></div></div></div>
        
        <p>In the Engine Administration application you can use the <a class="link" href="administration.html#administration.runtimeinformation" title="Runtime information">Runtime Information</a>
            page to view information about the java heap memory and all running java threads with
            their current call stack. Another important page is the <a class="link" href="administration.html#administration.about" title="About">About</a> page where you find
            information about the Axon.ivy Engine version, Java version and the Java system
            properties.</p>
        <p>For each <a class="link" href="administration.html#administration.externaldatabase" title="External Databases">external
                database</a> you can find information about the last SQL statements that have
            been executed on the database and the open connections to the database.</p>
    </div>
</div></div></div></div><div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation"><div class="bs-sidebar hidden-print affix" data-spy="affix" data-offset-top="350" data-offset-bottom="250"><ul class="nav bs-sidenav"><li><a href="#monitoring-logging">Logging</a><ul class="nav subnav"><li><a href="#d5e5173">Log Message Format</a></li><li><a href="#d5e5223">Runtime Log</a></li><li><a href="#monitoring-logging-performance">Request/Performance Logging</a></li><li><a href="#monitoring-logging-ulc">Configure ULC logging on server and client</a></li></ul></li><li><a href="#monitoring-performancestatistic">Process Element Performance Statistic and Analysis</a><ul class="nav subnav"><li><a href="#monitoring-performancestatistic-configure">Configure Process Element Performance Statistic on Axon.ivy Engine</a></li><li><a href="#monitoring-performancestatistic-analyse">Analyse the Performance Statistic</a></li></ul></li><li><a href="#monitoring-jmx">Java Management Extensions (JMX)</a><ul class="nav subnav"><li><a href="#d5e5486">Activate Remote Access</a></li><li><a href="#d5e5495">Auto Discovery (JDP)</a></li><li><a href="#d5e5503">Provided MBeans</a></li></ul></li><li><a href="#monitoring-visualvm">VisualVM</a><ul class="nav subnav"><li><a href="#d5e5607">Axon.ivy Plugin for VisualVM</a></li></ul></li><li><a href="#monitoring-serveradministration">Engine Administration </a><ul class="nav subnav"></ul></li><li><br><a href="#top">Back to top</a></li></ul></div></div></div><hr></div></div><script src="js/jquery.min.js"></script><script src="js/bootstrap.min.js"></script><script src="js/offcanvas.js"></script></body></html>